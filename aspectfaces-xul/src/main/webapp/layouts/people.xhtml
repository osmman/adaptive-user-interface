<?xml version="1.0"?>
<f:view xmlns:f="http://java.sun.com/jsf/core"
        xmlns:xf="http://xulfaces.sourceforge.net/xulfaces/jsf/facelet"
        xmlns:af="http://codingcrayons.com/aspectfaces"
        locale="#{context.language.concat('_').concat(context.country)}">
    <overlay id="layout"
             xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
        <xf:commandset id="commandset">
            <xf:command id="cmd-show-person" oncommand="detailPerson()"/>
            <xf:command id="cmd-delete-person"  action="#{listboxPersonController.removeSelected()}" oncommand="deletePerson()"/>
        </xf:commandset>

        <tabpanel id="people-content" >

                <xf:popupset>
                    <xf:menupopup id="actions">
                        <menuitem label="Open" command="cmd-show-person" />
                        <menuitem label="Delete" command="cmd-delete-person" />
                    </xf:menupopup>
                </xf:popupset>

                <xf:dataListbox
                        id="my-listbox"
                        value="#{listboxPersonController.model}"
                        binding="#{listboxPersonController.listBoxComponent}"
                        var="bean"
                        updateSmoothly="true"
                        context="actions"
                        >

                    <xf:listhead>
                        <xf:listheader label="Email" flex="1"/>
                        <xf:listheader label="Jmeno" flex="1"/>
                        <xf:listheader label="Prijmeni" flex="1"/>
                        <xf:listheader label="Gender" flex="1"/>
                    </xf:listhead>

                    <xf:listcols>
                        <xf:listcol flex="1"/>
                        <xf:listcol flex="1"/>
                        <xf:listcol flex="1"/>
                        <xf:listcol flex="1"/>
                    </xf:listcols>

                    <xf:listitem context="actions"  value="#{bean.id}">
                        <xf:listcell value="#{bean.email}" />
                        <xf:listcell value="#{bean.personInfo.firstName}" />
                        <xf:listcell value="#{bean.personInfo.lastName}" />
                        <xf:listcell value="#{text[bean.personInfo.gender.label]}" />
                    </xf:listitem>

                </xf:dataListbox>
                <xf:button label="#{text['action.registration']}" onclick="openRegistrationWizard()" />
        </tabpanel>

    </overlay>
</f:view>